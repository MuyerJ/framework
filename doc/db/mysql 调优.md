### 调优

##### 1、执行计划 Explain
```
 explain ：
    重要的字段：id、type、key、Extra
 
    id
    select_type
    table
    type
    possible_keys
    key
    key_len   索引长度
    ref
    rows
    filtered
    Extra     ==> using where、index、filesort 
```

#### 2、索引
```
为啥使用B+树？

mysql数据读取过程：
    (1) 文件(数据+索引)存磁盘
    (2) 启动mysql，磁盘数据加载到内存
    (3) 分块读取
    ==> 局部性原理:时间、空间
    ==> 磁盘预读：页(dataPage,4k或8k),读取数据的时候,读的是页的证书不
    
memory引擎：
    Hash（不能范围查询）

Innodb引擎：
    自适应Hash
    树：二叉树、BST、AVL、红黑树(有序、平衡)

查询效率提高 ==> 减少IO次数、减少IO量
    
树的层数越高,IO次数越多 ==> 多叉排序树(b-树) 
                      ==>  每一个节点组成：
                        (1) 键值(主键)
                        (2) 指针(指向下一个块地址)
                        (3) 行数据
                      ==> 三层全部填满，能存多少条数据? 假设1个数据是1k
                        一个数据库：页的整数倍 4页=16kb
                        16*16*16=4096条
                        
B+树：
    叶子节点相较于B-树，有重复数据的；
    非叶子节点不存数据；
    三层全满存多少数据？4千万
        块=16k   
        指针+键值=10bit
        1600*1600*1640960000=4千万
    一般情况3-4层就能支持千万级别的数据；
    键值要尽可能少占用空间：
        int 4 ; varchar(1-n) n<4用varchar
    表指定Id是Int，要自增吗？
        满足业务需求的情况下，要尽可能的自增，索引维护性能会下降
         eg:数据迁移的时候需要把索引去掉
    身份证表，身份证号做主键？
        代理主键         
        自然主键
    索引分类：
        主键索引                 
        唯一索引                 
        普通索引                 
        全文索引 --> 全文检索 --> lucene、solr、es                
        组合索引                 
    索引是不是越多越好？
        维护麻烦
        占用空间大，导致IO增多
```